<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Anime Stream Player</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #000;
            color: white;
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
        }

        /* Normal Player Box */
        .player-container {
            width: 100%;
            max-width: 900px;
            position: relative;
            background: #000;
        }

        /* 16:9 Ratio Wrapper */
        .video-wrapper {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            height: 0;
        }

        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* --- ZABARDASTI FULL SCREEN MODE (CSS) --- */
        /* Jab button dabega to ye class active hogi */
        .force-fullscreen {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            z-index: 999999 !important;
            padding-bottom: 0 !important; /* Ratio hatana padega */
            background: black !important;
        }
        
        .force-fullscreen iframe {
            height: 100% !important;
            width: 100% !important;
        }

        /* Controls Section */
        .controls {
            position: absolute;
            bottom: -50px; /* Video ke niche */
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            padding: 10px;
            box-sizing: border-box;
            z-index: 1000000; /* Video se bhi upar */
        }

        .fs-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
        
        /* Error Msg */
        #error-msg { display: none; color: red; padding: 20px; }

    </style>
</head>
<body>

    <div class="player-container">
        <!-- Wrapper ID for Fullscreen Toggle -->
        <div class="video-wrapper" id="videoBox">
            <iframe id="bunnyFrame" src="" scrolling="no" allow="accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture; fullscreen" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"></iframe>
        </div>
    </div>

    <div class="controls">
        <button class="fs-btn" onclick="toggleMode()">â›¶ FULL SCREEN</button>
    </div>

    <div id="error-msg">Error: URL me ?v=VIDEO_ID add karein</div>

    <script>
        // ðŸ‘‡ YAHAN APNI LIBRARY ID LIKHEIN ðŸ‘‡
        const LIBRARY_ID = "547896"; // Example ID, ise change karein

        function loadVideo() {
            const urlParams = new URLSearchParams(window.location.search);
            const videoId = urlParams.get('v'); 
            
            if (videoId) {
                // Autoplay aur permissions ke sath URL
                document.getElementById('bunnyFrame').src = `https://iframe.mediadelivery.net/embed/${LIBRARY_ID}/${videoId}?autoplay=true&preload=true`;
            } else {
                document.getElementById('error-msg').style.display = 'block';
            }
        }

        // --- NEW LOGIC: HYBRID FULL SCREEN ---
        function toggleMode() {
            var box = document.getElementById("videoBox");
            var btn = document.querySelector(".fs-btn");

            // Check karte hain ki abhi fullscreen hai ya nahi
            if (box.classList.contains("force-fullscreen")) {
                // Agar Fullscreen hai, to hatao (Normal Mode)
                box.classList.remove("force-fullscreen");
                btn.innerHTML = "â›¶ FULL SCREEN";
                
                // Browser API Exit
                if (document.exitFullscreen) document.exitFullscreen();
            } else {
                // Fullscreen lagao
                box.classList.add("force-fullscreen");
                btn.innerHTML = "âŒ EXIT";

                // Browser API Try (Backup ke liye)
                if (box.requestFullscreen) box.requestFullscreen().catch(e => console.log(e));
                else if (box.webkitRequestFullscreen) box.webkitRequestFullscreen(); // Safari
            }
        }

        window.onload = loadVideo;
    </script>

</body>
</html>
